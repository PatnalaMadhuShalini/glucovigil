<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="800" height="800" viewBox="0 0 800 800">
  <!-- Styles -->
  <style>
    .background { fill: white; }
    .title { font-family: Arial; font-size: 18px; font-weight: bold; fill: #37474f; text-anchor: middle; }
    .state { fill: #e8eaf6; stroke: #3f51b5; stroke-width: 2; }
    .initial-state { fill: #000000; }
    .final-state { fill: white; stroke: #000000; stroke-width: 2; }
    .final-state-inner { fill: #000000; }
    .composite-state { fill: #f5f5f5; stroke: #9fa8da; stroke-width: 2; stroke-dasharray: 5,5; }
    .state-name { font-family: Arial; font-size: 14px; font-weight: bold; fill: #303f9f; text-anchor: middle; }
    .state-label { font-family: Arial; font-size: 12px; fill: #5c6bc0; }
    .transition { stroke: #455a64; stroke-width: 1.5; marker-end: url(#arrow); }
    .transition-text { font-family: Arial; font-size: 12px; fill: #455a64; }
    .container-label { font-family: Arial; font-size: 16px; font-weight: bold; fill: #1a237e; }
  </style>
  
  <!-- Arrow Marker Definition -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#455a64"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect class="background" width="100%" height="100%" />
  
  <!-- Title -->
  <text class="title" x="400" y="40">GlucoSmart User Session State Diagram</text>
  
  <!-- Initial State -->
  <circle class="initial-state" cx="100" cy="120" r="10" />
  
  <!-- Anonymous State Container -->
  <rect class="composite-state" x="50" y="180" width="300" height="250" rx="10" ry="10" />
  <text class="container-label" x="200" y="210">Anonymous User</text>
  
  <!-- Anonymous States -->
  <rect class="state" x="90" y="230" width="220" height="50" rx="10" ry="10" />
  <text class="state-name" x="200" y="260">Home Page Viewing</text>
  
  <rect class="state" x="90" y="330" width="220" height="50" rx="10" ry="10" />
  <text class="state-name" x="200" y="360">Authentication</text>
  
  <!-- Authenticated State Container -->
  <rect class="composite-state" x="400" y="180" width="350" height="550" rx="10" ry="10" />
  <text class="container-label" x="575" y="210">Authenticated User</text>
  
  <!-- Authentication States -->
  <rect class="state" x="465" y="230" width="220" height="50" rx="10" ry="10" />
  <text class="state-name" x="575" y="260">Dashboard Viewing</text>
  
  <rect class="state" x="465" y="330" width="220" height="50" rx="10" ry="10" />
  <text class="state-name" x="575" y="360">Health Data Entry</text>
  
  <rect class="state" x="465" y="430" width="220" height="50" rx="10" ry="10" />
  <text class="state-name" x="575" y="460">Risk Assessment</text>
  
  <rect class="state" x="465" y="530" width="220" height="50" rx="10" ry="10" />
  <text class="state-name" x="575" y="560">Recommendation Viewing</text>
  
  <rect class="state" x="465" y="630" width="220" height="50" rx="10" ry="10" />
  <text class="state-name" x="575" y="660">Profile Management</text>
  
  <!-- Final State -->
  <circle class="final-state" cx="200" cy="550" r="15" />
  <circle class="final-state-inner" cx="200" cy="550" r="8" />
  
  <!-- Transitions -->
  <!-- Initial to Home Page -->
  <path class="transition" d="M100,130 L100,230" />
  <text class="transition-text" x="130" y="190">Start App</text>
  
  <!-- Home Page to Authentication -->
  <path class="transition" d="M200,280 L200,330" />
  <text class="transition-text" x="170" y="310">Login/Register Click</text>
  
  <!-- Authentication to Dashboard -->
  <path class="transition" d="M310,355 L465,255" />
  <text class="transition-text" x="380" y="290">Successful Login</text>
  
  <!-- Transitions between authenticated states -->
  <path class="transition" d="M575,280 L575,330" />
  <text class="transition-text" x="625" y="310">Enter Health Data</text>
  
  <path class="transition" d="M575,380 L575,430" />
  <text class="transition-text" x="625" y="410">Submit Data</text>
  
  <path class="transition" d="M575,480 L575,530" />
  <text class="transition-text" x="625" y="510">View Recommendations</text>
  
  <!-- Dashboard to Profile Management -->
  <path class="transition" d="M465,255 L430,255 L430,655 L465,655" />
  <text class="transition-text" x="370" y="450">Profile Click</text>
  
  <!-- Profile Management to Dashboard -->
  <path class="transition" d="M575,630 L575,590 L640,590 L640,290 L575,290" />
  <text class="transition-text" x="680" y="450">Back to Dashboard</text>
  
  <!-- Dashboard to Documentation -->
  <path class="transition" d="M575,230 L575,170 L655,170" />
  <text class="transition-text" x="655" y="160">Documentation Click</text>
  
  <rect class="state" x="655" y="140" width="100" height="40" rx="10" ry="10" />
  <text class="state-name" x="705" y="165">Documentation</text>
  
  <!-- Documentation to Dashboard -->
  <path class="transition" d="M655,175 L575,175 L575,230" />
  <text class="transition-text" x="620" y="190">Back</text>
  
  <!-- Logout paths -->
  <path class="transition" d="M465,255 L375,255 L200,455" />
  <text class="transition-text" x="300" y="235">Logout</text>
  
  <path class="transition" d="M465,655 L375,655 L200,530" />
  <text class="transition-text" x="300" y="680">Logout</text>
  
  <!-- Session Timeout -->
  <path class="transition" d="M400,355 L200,455" />
  <text class="transition-text" x="275" y="380">Session Timeout</text>
  
  <!-- Logout to Final state -->
  <path class="transition" d="M200,480 L200,535" />
  <text class="transition-text" x="255" y="505">End Session</text>
  
  <!-- Failed Login -->
  <path class="transition" d="M200,330 C150,330 150,370 200,370 C250,370 250,330 200,330" />
  <text class="transition-text" x="290" y="360">Failed Login</text>
</svg>
